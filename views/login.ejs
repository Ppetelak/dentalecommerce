<!DOCTYPE html>
<html>

<head>
    <title>Dental - Mount Hermon</title>
    <link rel="icon" type="image/png" href="./img/faviconV2_mounthermon.png" sizes="32x32">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@100;200;300;500;900&display=swap" rel="stylesheet">
</head>

<body id="bodyLogin">
    <div class="containerLogin">
        <div class="d-flex justify-content-center align-items-center vh-100">
            <img src="./img/logomounthermonoriginal.png" width="30%">
          </div>          
        <h3 class="text-center"> Ecommerce Dental - Gestão </h3>
        <form id="login-form">
            <div class="form-group">
                <label for="username">Usuário:</label>
                <input type="text" class="form-control" id="username" placeholder="Digite seu usuário" name="username">
            </div>
            <div class="form-group">
                <label for="password">Senha:</label>
                <input type="password" class="form-control" id="password" placeholder="Digite sua senha"
                    name="password">
            </div>
            <button type="submit" class="btn btn-primary btn-block entrar">Entrar</button>
        </form>
    </div>
    <div class="fixed-bottom"></div>
</body>
<script>
    const form = document.querySelector('form');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const username = document.querySelector('#username').value;
        const password = document.querySelector('#password').value;

        console.log(username, password); // Verifique se os valores estão corretos

        const response = await fetch('/login-verifica', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ username, password })
        });

        const data = await response.json();

        console.log(data); // Verifique a resposta do servidor

        if (response.status === 200) {
            // Autenticação bem-sucedida, redirecionar para a página de dashboard
            console.log('Usuário autenticado com sucesso');
            window.location.href = '/implantacoes';
        } else {
            // Exibir mensagem de erro
            console.error(data.error);
        }
    });
</script>

</html>